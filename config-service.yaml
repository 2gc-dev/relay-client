# CloudBridge Client Service Configuration
# Конфигурация для Windows службы

# Relay Configuration
relay:
  host: "relay.2gc.ru"  # Реальный relay сервер
  port: 9090
  timeout: "30s"
  tls:
    enabled: true
    min_version: "1.3"
    verify_cert: true
    ca_cert: ""
    client_cert: ""
    client_key: ""
    server_name: ""

# Authentication Configuration
auth:
  type: "jwt"
  secret: "${JWT_SECRET}"             # Основной JWT секрет (из переменной окружения)
  fallback_secret: "${FALLBACK_SECRET}"  # Fallback секрет для kid: "fallback-key" (из переменной окружения)
  keycloak:
    enabled: false
    server_url: ""
    realm: ""
    client_id: ""

# Rate Limiting Configuration
rate_limiting:
  enabled: true
  max_retries: 5
  backoff_multiplier: 2.0
  max_backoff: "10s"

# Logging Configuration (для службы)
logging:
  level: "info"  # Уровень логирования для службы
  format: "json"  # JSON формат для парсинга логов
  output: "file"  # Вывод в файл для службы
  file_path: "C:\\ProgramData\\cloudbridge-client\\logs\\cloudbridge-client.log"

# Metrics Configuration
metrics:
  enabled: true
  prometheus_port: 9091
  tenant_metrics: true
  buffer_metrics: true
  connection_metrics: true

# Performance Configuration
performance:
  enabled: true
  optimization_mode: "high_throughput"
  gc_percent: 100
  memory_ballast: true

# P2P Mesh Configuration для службы
p2p:
  peer_id: "server-001"
  endpoint: "192.168.1.100:51820"
  public_key: "WG_PUBLIC_KEY"
  private_key: "WG_PRIVATE_KEY"
  mesh_port: 51820

# Tunnel Configuration
tunnel:
  local_port: 3389
  remote_host: "target.2gc.ru"
  remote_port: 3389
  buffer_size: 4096
  max_buffers: 100

# Heartbeat Configuration
heartbeat:
  interval: "10s"
  timeout: "5s"
