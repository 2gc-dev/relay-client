#!/bin/bash

# –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç QUIC –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±–µ–∑ Go –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
set -e

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
QUIC_HOST="109.120.180.160"
QUIC_PORT="9091"

echo -e "${BLUE}üß™ –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç QUIC –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è${NC}"
echo -e "${BLUE}=================================${NC}"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å UDP –ø–æ—Ä—Ç–∞
echo -e "${BLUE}üåê –ü—Ä–æ–≤–µ—Ä—è–µ–º UDP –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å $QUIC_HOST:$QUIC_PORT...${NC}"
if nc -zvu "$QUIC_HOST" "$QUIC_PORT" 2>/dev/null; then
    echo -e "${GREEN}‚úÖ UDP –ø–æ—Ä—Ç –¥–æ—Å—Ç—É–ø–µ–Ω${NC}"
else
    echo -e "${RED}‚ùå UDP –ø–æ—Ä—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω${NC}"
    exit 1
fi

# –¢–µ—Å—Ç–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É UDP –ø–∞–∫–µ—Ç–∞
echo -e "${BLUE}üì§ –¢–µ—Å—Ç–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É UDP –ø–∞–∫–µ—Ç–∞...${NC}"
echo "QUIC test message" | timeout 5 nc -u "$QUIC_HOST" "$QUIC_PORT" || echo -e "${YELLOW}‚ö†Ô∏è  UDP –ø–∞–∫–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –Ω–æ –æ—Ç–≤–µ—Ç –Ω–µ –ø–æ–ª—É—á–µ–Ω (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è QUIC)${NC}"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º LoadBalancer —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
echo -e "${BLUE}üìä –ü—Ä–æ–≤–µ—Ä—è–µ–º LoadBalancer —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É...${NC}"
echo -e "${YELLOW}‚ÑπÔ∏è  LoadBalancer –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–∞${NC}"

echo -e "${GREEN}‚úÖ –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω${NC}"
echo -e "${BLUE}=================================${NC}"
echo -e "${YELLOW}‚ÑπÔ∏è  –î–ª—è –ø–æ–ª–Ω–æ–≥–æ QUIC —Ç–µ—Å—Ç–∞ –Ω—É–∂–µ–Ω Go –∫–ª–∏–µ–Ω—Ç${NC}"
echo -e "${YELLOW}‚ÑπÔ∏è  UDP –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞${NC}"
