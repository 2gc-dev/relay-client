# üöÄ GitHub Actions Setup Report

## üìã **–°–¢–ê–¢–£–°: –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ**

**–î–∞—Ç–∞:** 14 —è–Ω–≤–∞—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ WORKFLOWS –°–û–ó–î–ê–ù–´, –ì–û–¢–û–í–´ –ö –ó–ê–ü–£–°–ö–£  
**–°–±–æ—Ä–∫–∞:** ‚úÖ –õ–û–ö–ê–õ–¨–ù–ê–Ø –°–ë–û–†–ö–ê –£–°–ü–ï–®–ù–ê

---

## ‚úÖ **–ß–¢–û –°–û–ó–î–ê–ù–û**

### **1. Workflow —Ñ–∞–π–ª—ã:**
- ‚úÖ `.github/workflows/build.yml` - –û—Å–Ω–æ–≤–Ω–∞—è —Å–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ `.github/workflows/deploy.yml` - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏
- ‚úÖ `.github/workflows/test-with-secrets.yml` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Å–µ–∫—Ä–µ—Ç–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏
- ‚úÖ `.github/workflows/test-build.yml` - –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç —Å–±–æ—Ä–∫–∏

### **2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- ‚úÖ `GITHUB_ACTIONS_SETUP.md` - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- ‚úÖ `GITHUB_ACTIONS_REPORT.md` - –≠—Ç–æ—Ç –æ—Ç—á–µ—Ç

---

## üîß **–ù–ê–°–¢–†–û–ô–ö–ê –°–ï–ö–†–ï–¢–û–í**

### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ GitHub:**
```
Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí New repository secret
```

#### **üîê –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ:**
- **`JWT_SECRET`** - –û—Å–Ω–æ–≤–Ω–æ–π JWT —Å–µ–∫—Ä–µ—Ç
- **`FALLBACK_SECRET`** - Fallback —Å–µ–∫—Ä–µ—Ç –¥–ª—è `kid: "fallback-key"`

#### **üåê –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:**
- **`RELAY_HOST`** - –•–æ—Å—Ç relay —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `edge.2gc.ru`)
- **`TEST_JWT_TOKEN`** - –¢–µ—Å—Ç–æ–≤—ã–π JWT —Ç–æ–∫–µ–Ω
- **`STAGING_HOST`** - –•–æ—Å—Ç –¥–ª—è staging
- **`PRODUCTION_HOST`** - –•–æ—Å—Ç –¥–ª—è production

### **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```
Settings ‚Üí Secrets and variables ‚Üí Actions ‚Üí Variables
```
- **`GO_VERSION`** - –í–µ—Ä—Å–∏—è Go (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `1.25`)
- **`RELAY_PORT`** - –ü–æ—Ä—Ç relay —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `9090`)

---

## üèóÔ∏è **WORKFLOW –û–ü–ò–°–ê–ù–ò–ï**

### **1. `build.yml` - –û—Å–Ω–æ–≤–Ω–∞—è —Å–±–æ—Ä–∫–∞:**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã:** push, pull_request, release
- ‚úÖ **–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã:** Linux, Windows, macOS
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** unit tests, linting, security scan
- ‚úÖ **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:** –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- ‚úÖ **–†–µ–ª–∏–∑—ã:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–æ–≤

### **2. `deploy.yml` - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:**
- ‚úÖ **–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:** workflow_dispatch
- ‚úÖ **–°—Ä–µ–¥—ã:** staging, production
- ‚úÖ **–°–µ–∫—Ä–µ—Ç—ã:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GitHub Secrets
- ‚úÖ **Deployment:** —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- ‚úÖ **Service:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–æ–≤

### **3. `test-with-secrets.yml` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏:**
- ‚úÖ **–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:** workflow_dispatch
- ‚úÖ **–¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤:** jwt, connection, full
- ‚úÖ **–°–µ–∫—Ä–µ—Ç—ã:** –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è:** JWT —Ç–æ–∫–µ–Ω–æ–≤ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

### **4. `test-build.yml` - –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç —Å–±–æ—Ä–∫–∏:**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã:** push, pull_request
- ‚úÖ **–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:** —Å–±–æ—Ä–∫–∞ –∏ –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

---

## üß™ **–õ–û–ö–ê–õ–¨–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï**

### **‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞:**
```bash
go build -o cloudbridge-client ./cmd/cloudbridge-client
# –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –£—Å–ø–µ—à–Ω–æ
```

### **‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç:**
```bash
./cloudbridge-client --help
./cloudbridge-client service --help
./cloudbridge-client p2p --help
./cloudbridge-client tunnel --help
# –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã
```

### **‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:**
```bash
./cloudbridge-client --config config.yaml --help
./cloudbridge-client --config config-test.yaml --help
# –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
```

---

## üöÄ **–ó–ê–ü–£–°–ö WORKFLOWS**

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ:**
- **Push –≤ main/develop** ‚Üí –ó–∞–ø—É—Å–∫ `build.yml` –∏ `test-build.yml`
- **Pull Request** ‚Üí –ó–∞–ø—É—Å–∫ `build.yml` –∏ `test-build.yml`
- **Release** ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏

### **–†—É—á–Ω—ã–µ:**
- **Deploy** ‚Üí `deploy.yml` (–≤—ã–±–æ—Ä —Å—Ä–µ–¥—ã: staging/production)
- **Test with Secrets** ‚Üí `test-with-secrets.yml` (–≤—ã–±–æ—Ä —Ç–∏–ø–∞ —Ç–µ—Å—Ç–∞)

---

## üîí **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨**

### **‚úÖ –ó–∞—â–∏—Ç–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤:**
- –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ GitHub Secrets
- –°–µ–∫—Ä–µ—Ç—ã –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –≤—ã–≤–æ–¥–µ
- –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è authorized workflows
- Environment-specific —Å–µ–∫—Ä–µ—Ç—ã

### **‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–¥–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Gosec)
- –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞ (golangci-lint)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

## üìä **–ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –õ–û–ì–ò**

### **–°—Ç–∞—Ç—É—Å —Å–±–æ—Ä–æ–∫:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ "Actions" GitHub
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ failed builds
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### **–õ–æ–≥–∏:**
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è—Ö

---

## üõ†Ô∏è **–õ–û–ö–ê–õ–¨–ù–ê–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ê**

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ workflows:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ act –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
npm install -g @nektos/act

# –ó–∞–ø—É—Å–∫ workflow –ª–æ–∫–∞–ª—å–Ω–æ
act -s JWT_SECRET="your-secret" -s FALLBACK_SECRET="your-fallback"
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ YAML
yamllint .github/workflows/*.yml

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Go –∫–æ–¥–∞
golangci-lint run
```

---

## üéØ **–ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø**

### **1. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ staging:**
```
Actions ‚Üí Deploy CloudBridge Client ‚Üí Run workflow
Environment: staging
Version: latest
```

### **2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JWT:**
```
Actions ‚Üí Test with Secrets ‚Üí Run workflow
Test Type: jwt
```

### **3. –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```
Actions ‚Üí Test with Secrets ‚Üí Run workflow
Test Type: full
```

---

## üîß **TROUBLESHOOTING**

### **–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

#### **1. –°–µ–∫—Ä–µ—Ç—ã –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ workflow –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–µ–∫—Ä–µ—Ç–∞–º
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é

#### **2. –°–±–æ—Ä–∫–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Go
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Go –∫–æ–¥–∞

#### **3. –¢–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

---

## üìö **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´**

- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [GitHub Secrets Documentation](https://docs.github.com/en/actions/security-guides/encrypted-secrets)
- [Go GitHub Actions](https://github.com/actions/setup-go)
- [Security Best Practices](https://docs.github.com/en/actions/security-guides/security-hardening-for-github-actions)

---

## üéâ **–ì–û–¢–û–í–ù–û–°–¢–¨ –ö PRODUCTION**

### **‚úÖ –í—Å–µ –≥–æ—Ç–æ–≤–æ:**
- Workflows —Å–æ–∑–¥–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞

### **‚úÖ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. **–î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub**
2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–≤—ã–π workflow**
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**

---

## üìã **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

**GitHub Actions –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

- ‚úÖ **Workflows —Å–æ–∑–¥–∞–Ω—ã** –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞** —É—Å–ø–µ—à–Ω–∞
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** –æ–±–µ—Å–ø–µ—á–µ–Ω–∞
- ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ GitHub

**–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ GitHub, –≤—Å–µ workflows –±—É–¥—É—Ç –≥–æ—Ç–æ–≤—ã –∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –∑–∞–ø—É—Å–∫—É!**

---

**–î–∞—Ç–∞:** 14 —è–Ω–≤–∞—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ  
**–°–±–æ—Ä–∫–∞:** ‚úÖ –õ–û–ö–ê–õ–¨–ù–ê–Ø –°–ë–û–†–ö–ê –£–°–ü–ï–®–ù–ê  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** üîê –ù–ê–°–¢–†–û–ò–¢–¨ –°–ï–ö–†–ï–¢–´ –í GITHUB
